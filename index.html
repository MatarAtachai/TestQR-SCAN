<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Challenge üéâ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Kanit', sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .step { display: none; }
        .step.active { display: block; animation: fadeIn 0.5s; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div class="bg-white w-full max-w-md rounded-2xl shadow-2xl p-8">
        
        <div id="step-0" class="step active text-center">
            <h1 class="text-3xl font-bold text-gray-800 mb-4">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö! üèÜ</h1>
            <p class="text-gray-600 mb-6">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏¥‡∏ã (5 ‡∏Ç‡πâ‡∏≠)</p>
            <input type="text" id="username" class="w-full border-2 border-purple-100 rounded-lg p-3 mb-4 focus:border-purple-500 outline-none" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì...">
            <button onclick="startQuiz()" class="w-full bg-purple-600 text-white font-bold py-3 rounded-lg hover:bg-purple-700 transition">‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏Å‡∏°</button>
        </div>

        <div id="quiz-container"></div>

        <div id="step-final" class="step text-center">
            <div class="text-6xl mb-4">üéâ</div>
            <h2 class="text-2xl font-bold text-gray-800 mb-2">‡∏™‡πà‡∏á‡∏Ñ‡∏≥‡∏ï‡∏≠‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢!</h2>
            <p id="final-result" class="text-gray-600 mb-6 font-semibold"></p>
            <div class="bg-purple-50 p-4 rounded-lg mb-6 text-left">
                <p class="text-sm text-purple-700">üìå ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà: <span id="current-time"></span></p>
                <p class="text-sm text-purple-700">üìä ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì: <span id="score-display"></span>/5</p>
            </div>
            <p class="text-xs text-gray-400 italic">‡πÄ‡∏£‡∏≤‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏•‡∏á Google Sheets ‡πÅ‡∏•‡πâ‡∏ß</p>
        </div>

    </div>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbwGWQBWR33Y2eY_KQV3aBtSp7Wzq2gNQO8JEKLxpF-kJ8OcEhjtaWGjg9WirfjetHcfyA/exec'; // ‡πÉ‡∏™‡πà URL ‡∏à‡∏≤‡∏Å Apps Script ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
        let currentStep = 0;
        let score = 0;
        let userName = "";

        const questions = [
            { q: "1 + 1 ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà?", options: ["1", "2", "3", "4"], correct: 1 },
            { q: "‡∏™‡∏µ‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡∏ï‡∏≠‡∏ô‡∏Å‡∏•‡∏≤‡∏á‡∏ß‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏™‡∏µ‡∏≠‡∏∞‡πÑ‡∏£?", options: ["‡πÅ‡∏î‡∏á", "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß", "‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô", "‡∏î‡∏≥"], correct: 2 },
            { q: "‡∏†‡∏≤‡∏©‡∏≤ HTML ‡πÉ‡∏ä‡πâ‡∏ó‡∏≥‡∏≠‡∏∞‡πÑ‡∏£?", options: ["‡∏ó‡∏≥‡πÄ‡∏ß‡πá‡∏ö", "‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£", "‡∏ã‡πà‡∏≠‡∏°‡∏£‡∏ñ", "‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡πÅ‡∏°‡∏ß"], correct: 0 },
            { q: "Google Sheets ‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÉ‡∏î?", options: ["‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ", "‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏ß‡∏¥‡∏î‡∏µ‡πÇ‡∏≠", "‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì", "‡∏û‡∏¥‡∏°‡∏û‡πå‡∏á‡∏≤‡∏ô"], correct: 2 },
            { q: "GitHub Pages ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏∞‡πÑ‡∏£?", options: ["‡∏ù‡∏≤‡∏Å‡πÄ‡∏á‡∏¥‡∏ô", "Hosting ‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå", "‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå", "‡∏î‡∏π‡∏´‡∏ô‡∏±‡∏á"], correct: 1 }
        ];

        function startQuiz() {
            userName = document.getElementById('username').value;
            if (!userName) return Swal.fire('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏ä‡∏∑‡πà‡∏≠', '', 'warning');
            renderQuestions();
            goToStep(1);
        }

        function renderQuestions() {
            const container = document.getElementById('quiz-container');
            questions.forEach((item, index) => {
                const qNum = index + 1;
                const html = `
                    <div id="step-${qNum}" class="step">
                        <div class="flex justify-between items-center mb-4">
                            <span class="text-xs font-bold text-purple-600 uppercase tracking-widest">Question ${qNum}/5</span>
                        </div>
                        <h3 class="text-xl font-bold text-gray-800 mb-6">${item.q}</h3>
                        <div class="space-y-3">
                            ${item.options.map((opt, i) => `
                                <button onclick="handleAnswer(${index}, ${i})" class="w-full text-left border-2 border-gray-100 p-4 rounded-xl hover:bg-purple-50 hover:border-purple-200 transition">
                                    ${opt}
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
                container.innerHTML += html;
            });
        }

        function handleAnswer(qIdx, choiceIdx) {
            if (choiceIdx === questions[qIdx].correct) score++;
            
            if (qIdx < questions.length - 1) {
                goToStep(qIdx + 2);
            } else {
                submitData();
            }
        }

        function goToStep(step) {
            document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
            document.getElementById('step-' + step).classList.add('active');
        }

        async function submitData() {
            Swal.fire({ title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å...', allowOutsideClick: false, didOpen: () => Swal.showLoading() });

            const now = new Date();
            const timeStr = now.getHours() + ":" + now.getMinutes().toString().padStart(2, '0') + ":" + now.getSeconds().toString().padStart(2, '0');

            try {
                await fetch(scriptURL, {
                    method: 'POST',
                    mode: 'no-cors', // ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏°‡πà‡πÉ‡∏´‡πâ‡∏ï‡∏¥‡∏î‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á CORS
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ name: userName, score: score, time: timeStr })
                });

                document.getElementById('current-time').innerText = timeStr;
                document.getElementById('score-display').innerText = score;
                document.getElementById('final-result').innerText = score === 5 ? "‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏≠‡∏ö‡∏ñ‡∏π‡∏Å‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠" : "‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å! ‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏∞";
                
                Swal.close();
                goToStep('final');
            } catch (error) {
                Swal.fire('‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î', '‡πÅ‡∏ï‡πà‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß', 'error');
            }
        }
    </script>
</body>

</html>

